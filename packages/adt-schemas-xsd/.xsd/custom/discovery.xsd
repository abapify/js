<?xml version="1.0" encoding="UTF-8"?>
<!--
  AtomPub Service Document Schema for ADT Discovery
  Based on RFC 5023 (Atom Publishing Protocol) + SAP ADT extensions
  
  Used by: GET /sap/bc/adt/discovery
  Content-Type: application/atomsvc+xml
  
  Real XML uses multiple namespaces:
  - app: http://www.w3.org/2007/app (AtomPub)
  - atom: http://www.w3.org/2005/Atom (Atom)
  - adtcomp: http://www.sap.com/adt/compatibility (SAP extension)
  
  Example structure:
  <app:service>
    <app:workspace>
      <atom:title>...</atom:title>
      <app:collection href="...">
        <atom:title>...</atom:title>
        <app:accept>...</app:accept>
        <atom:category term="..." scheme="..."/>
        <adtcomp:templateLinks>
          <adtcomp:templateLink rel="..." template="..."/>
        </adtcomp:templateLinks>
      </app:collection>
    </app:workspace>
  </app:service>
-->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:app="http://www.w3.org/2007/app"
    xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:adtcomp="http://www.sap.com/adt/compatibility"
    targetNamespace="http://www.w3.org/2007/app"
    elementFormDefault="qualified">

  <xsd:import namespace="http://www.w3.org/2005/Atom" schemaLocation="atom.xsd"/>
  <xsd:import namespace="http://www.sap.com/adt/compatibility" schemaLocation="templatelink.xsd"/>

  <!-- Root element: service document -->
  <xsd:element name="service" type="app:ServiceType"/>

  <!-- Service Document Type -->
  <xsd:complexType name="ServiceType">
    <xsd:sequence>
      <xsd:element name="workspace" type="app:WorkspaceType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>

  <!-- Workspace Type -->
  <xsd:complexType name="WorkspaceType">
    <xsd:sequence>
      <xsd:element ref="atom:title" minOccurs="0"/>
      <xsd:element name="collection" type="app:CollectionType" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
  </xsd:complexType>

  <!-- Collection Type -->
  <xsd:complexType name="CollectionType">
    <xsd:sequence>
      <xsd:element ref="atom:title" minOccurs="0"/>
      <xsd:element name="accept" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element ref="atom:category" minOccurs="0" maxOccurs="unbounded"/>
      <xsd:element ref="adtcomp:templateLinks" minOccurs="0"/>
    </xsd:sequence>
    <xsd:attribute name="href" type="xsd:anyURI" use="required"/>
  </xsd:complexType>

</xsd:schema>
