# ts-xml-codegen

Generate ts-xml schemas from XSD files.

## Installation

```bash
bun add ts-xml-codegen
```

## CLI Usage

```bash
# Generate from single file
ts-xml-codegen schema.xsd

# Generate from multiple files
ts-xml-codegen schemas/*.xsd

# Specify output directory
ts-xml-codegen schemas/*.xsd -o generated/

# Specify namespace prefix
ts-xml-codegen schema.xsd --prefix myns

# Output to stdout
ts-xml-codegen schema.xsd --stdout
```

## Programmatic Usage

```typescript
import { readFileSync } from 'fs';
import { parse } from 'ts-xml';
import { XsdSchemaSchema } from 'ts-xml-xsd';
import { generateTsXmlSchemas } from 'ts-xml-codegen';

// Parse XSD
const xsdContent = readFileSync('schema.xsd', 'utf-8');
const schema = parse(XsdSchemaSchema, xsdContent);

// Generate ts-xml code
const tsCode = generateTsXmlSchemas(schema, {
  prefix: 'myns',
  exportTypes: true,
  includeComments: true,
});

console.log(tsCode);
```

## Options

| Option | CLI Flag | Description |
|--------|----------|-------------|
| `prefix` | `-p, --prefix` | Namespace prefix for generated schemas |
| `exportTypes` | - | Export TypeScript types (default: true) |
| `includeComments` | - | Include JSDoc comments (default: true) |

## Generated Output

Given this XSD:

```xml
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://example.com/person">
  <xsd:complexType name="Person">
    <xsd:sequence>
      <xsd:element name="name" type="xsd:string"/>
      <xsd:element name="age" type="xsd:int"/>
    </xsd:sequence>
    <xsd:attribute name="id" type="xsd:string" use="required"/>
  </xsd:complexType>
</xsd:schema>
```

Generates:

```typescript
/**
 * Auto-generated ts-xml schemas from XSD
 * Namespace: http://example.com/person
 * Generated by ts-xml-codegen
 */

import { tsxml, type InferSchema } from 'ts-xml';

/** Target namespace */
export const NS = 'http://example.com/person';
export const PREFIX = 'person';

/** Person schema */
export const PersonSchema = tsxml.schema({
  tag: 'person:person',
  ns: { person: NS },
  fields: {
    name: { kind: 'elem', name: 'person:name', type: 'string' },
    age: { kind: 'elem', name: 'person:age', type: 'number' },
    id: { kind: 'attr', name: 'person:id', type: 'string' },
  },
} as const);

// Type exports
export type Person = InferSchema<typeof PersonSchema>;
```

## Features

- ✅ Complex types with sequences
- ✅ Simple types (enums)
- ✅ Attributes
- ✅ Type inheritance (extension)
- ✅ Optional elements (minOccurs="0")
- ✅ Arrays (maxOccurs="unbounded")
- ✅ Namespace handling
- ✅ Type exports

## License

MIT
